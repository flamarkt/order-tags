{"version":3,"file":"backoffice.js","mappings":"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","sources":["webpack://@flamarkt/order-tags/webpack/bootstrap","webpack://@flamarkt/order-tags/webpack/runtime/compat get default export","webpack://@flamarkt/order-tags/webpack/runtime/define property getters","webpack://@flamarkt/order-tags/webpack/runtime/hasOwnProperty shorthand","webpack://@flamarkt/order-tags/webpack/runtime/make namespace object","webpack://@flamarkt/order-tags/external root \"((flarum.extensions['flamarkt-backoffice']||{})['backoffice']||{})['app']\"","webpack://@flamarkt/order-tags/external root \"flarum.core.compat['common/extend']\"","webpack://@flamarkt/order-tags/external root \"((flarum.extensions['flamarkt-backoffice']||{})['common']||{})['components/ActiveLinkButton']\"","webpack://@flamarkt/order-tags/external root \"((flarum.extensions['flamarkt-backoffice']||{})['backoffice']||{})['components/BackofficeNav']\"","webpack://@flamarkt/order-tags/./node_modules/@babel/runtime/helpers/esm/setPrototypeOf.js","webpack://@flamarkt/order-tags/./node_modules/@babel/runtime/helpers/esm/inheritsLoose.js","webpack://@flamarkt/order-tags/external root \"flarum.core.compat['common/components/Page']\"","webpack://@flamarkt/order-tags/external root \"flarum.core.compat['common/components/LinkButton']\"","webpack://@flamarkt/order-tags/external root \"((flarum.extensions['flamarkt-backoffice']||{})['common']||{})['states/AbstractListState']\"","webpack://@flamarkt/order-tags/./src/backoffice/states/TagListState.ts","webpack://@flamarkt/order-tags/external root \"((flarum.extensions['flamarkt-backoffice']||{})['backoffice']||{})['components/AbstractList']\"","webpack://@flamarkt/order-tags/./src/backoffice/components/TagList.ts","webpack://@flamarkt/order-tags/./src/backoffice/pages/TagIndexPage.ts","webpack://@flamarkt/order-tags/external root \"((flarum.extensions['flamarkt-backoffice']||{})['common']||{})['pages/AbstractShowPage']\"","webpack://@flamarkt/order-tags/external root \"((flarum.extensions['flamarkt-backoffice']||{})['backoffice']||{})['components/SubmitButton']\"","webpack://@flamarkt/order-tags/external root \"flarum.core.compat['common/components/LoadingIndicator']\"","webpack://@flamarkt/order-tags/external root \"flarum.core.compat['common/components/Switch']\"","webpack://@flamarkt/order-tags/external root \"flarum.core.compat['common/utils/ItemList']\"","webpack://@flamarkt/order-tags/./src/backoffice/pages/TagShowPage.ts","webpack://@flamarkt/order-tags/./src/backoffice/compat.ts","webpack://@flamarkt/order-tags/external root \"flarum.core.compat['common/Component']\"","webpack://@flamarkt/order-tags/./src/common/components/TagLabel.ts","webpack://@flamarkt/order-tags/./src/common/components/TagLabels.ts","webpack://@flamarkt/order-tags/external root \"flarum.core.compat['common/Model']\"","webpack://@flamarkt/order-tags/./src/common/models/Tag.ts","webpack://@flamarkt/order-tags/./src/common/compat.ts","webpack://@flamarkt/order-tags/external root \"flarum.core.compat['common/app']\"","webpack://@flamarkt/order-tags/external root \"((flarum.extensions['flamarkt-core']||{})['common']||{})['models/Order']\"","webpack://@flamarkt/order-tags/external root \"((flarum.extensions['flamarkt-core']||{})['backoffice']||{})['components/OrderList']\"","webpack://@flamarkt/order-tags/external root \"((flarum.extensions['flamarkt-core']||{})['backoffice']||{})['pages/OrderShowPage']\"","webpack://@flamarkt/order-tags/external root \"((flarum.extensions['flamarkt-backoffice']||{})['common']||{})['components/AbstractRelationshipSelect']\"","webpack://@flamarkt/order-tags/external root \"flarum.core.compat['common/helpers/highlight']\"","webpack://@flamarkt/order-tags/./src/backoffice/components/TagRelationshipSelect.ts","webpack://@flamarkt/order-tags/./src/backoffice/index.ts","webpack://@flamarkt/order-tags/./src/common/addModels.ts","webpack://@flamarkt/order-tags/./src/backoffice/extendOrderIndex.ts","webpack://@flamarkt/order-tags/./src/backoffice/extendOrderShow.ts"],"sourcesContent":["// The require scope\nvar __webpack_require__ = {};\n\n","// getDefaultExport function for compatibility with non-harmony modules\n__webpack_require__.n = (module) => {\n\tvar getter = module && module.__esModule ?\n\t\t() => (module['default']) :\n\t\t() => (module);\n\t__webpack_require__.d(getter, { a: getter });\n\treturn getter;\n};","// define getter functions for harmony exports\n__webpack_require__.d = (exports, definition) => {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))","// define __esModule on exports\n__webpack_require__.r = (exports) => {\n\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n\t}\n\tObject.defineProperty(exports, '__esModule', { value: true });\n};","const __WEBPACK_NAMESPACE_OBJECT__ = ((flarum.extensions['flamarkt-backoffice']||{})['backoffice']||{})['app'];","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['common/extend'];","const __WEBPACK_NAMESPACE_OBJECT__ = ((flarum.extensions['flamarkt-backoffice']||{})['common']||{})['components/ActiveLinkButton'];","const __WEBPACK_NAMESPACE_OBJECT__ = ((flarum.extensions['flamarkt-backoffice']||{})['backoffice']||{})['components/BackofficeNav'];","export default function _setPrototypeOf(o, p) {\n  _setPrototypeOf = Object.setPrototypeOf ? Object.setPrototypeOf.bind() : function _setPrototypeOf(o, p) {\n    o.__proto__ = p;\n    return o;\n  };\n  return _setPrototypeOf(o, p);\n}","import setPrototypeOf from \"./setPrototypeOf.js\";\nexport default function _inheritsLoose(subClass, superClass) {\n  subClass.prototype = Object.create(superClass.prototype);\n  subClass.prototype.constructor = subClass;\n  setPrototypeOf(subClass, superClass);\n}","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['common/components/Page'];","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['common/components/LinkButton'];","const __WEBPACK_NAMESPACE_OBJECT__ = ((flarum.extensions['flamarkt-backoffice']||{})['common']||{})['states/AbstractListState'];","import AbstractListState from 'flamarkt/backoffice/common/states/AbstractListState';\nimport Tag from '../../common/models/Tag';\n\nexport default class TagListState extends AbstractListState<Tag> {\n    type() {\n        return 'flamarkt/order-tags';\n    }\n}\n","const __WEBPACK_NAMESPACE_OBJECT__ = ((flarum.extensions['flamarkt-backoffice']||{})['backoffice']||{})['components/AbstractList'];","import app from 'flamarkt/backoffice/backoffice/app';\nimport AbstractList from 'flamarkt/backoffice/backoffice/components/AbstractList';\nimport LinkButton from 'flarum/common/components/LinkButton';\nimport Tag from '../../common/models/Tag';\n\nexport default class TagList extends AbstractList<Tag> {\n    head() {\n        const columns = super.head();\n\n        columns.add('name', m('th', 'Name'));\n\n        return columns;\n    }\n\n    columns(tag: Tag) {\n        const columns = super.columns(tag);\n\n        columns.add('name', m('td', tag.name()), 10);\n\n        return columns;\n    }\n\n    actions(tag: Tag) {\n        const actions = super.actions(tag);\n\n        actions.add('edit', LinkButton.component({\n            className: 'Button Button--icon',\n            icon: 'fas fa-pen',\n            href: app.route('orderTags.show', {\n                id: tag.id(),\n            }),\n        }));\n\n        return actions;\n    }\n}\n","import app from 'flamarkt/backoffice/backoffice/app';\nimport {Vnode} from 'mithril';\nimport Page from 'flarum/common/components/Page';\nimport LinkButton from 'flarum/common/components/LinkButton';\nimport TagListState from '../states/TagListState';\nimport TagList from '../components/TagList';\n\nexport default class TagIndexPage extends Page {\n    listState!: TagListState;\n\n    oninit(vnode: Vnode) {\n        super.oninit(vnode);\n\n        this.listState = new TagListState();\n        this.listState.refresh();\n    }\n\n    view() {\n        return m('.OrderTagIndexPage', m('.container', [\n            m('.Form-group', [\n                LinkButton.component({\n                    className: 'Button',\n                    href: app.route('orderTags.show', {\n                        id: 'new',\n                    }),\n                }, 'New tag'),\n            ]),\n            m(TagList, {\n                state: this.listState,\n            }),\n        ]));\n    }\n}\n","const __WEBPACK_NAMESPACE_OBJECT__ = ((flarum.extensions['flamarkt-backoffice']||{})['common']||{})['pages/AbstractShowPage'];","const __WEBPACK_NAMESPACE_OBJECT__ = ((flarum.extensions['flamarkt-backoffice']||{})['backoffice']||{})['components/SubmitButton'];","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['common/components/LoadingIndicator'];","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['common/components/Switch'];","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['common/utils/ItemList'];","import app from 'flamarkt/backoffice/backoffice/app';\nimport {Children} from 'mithril';\nimport AbstractShowPage from 'flamarkt/backoffice/common/pages/AbstractShowPage';\nimport SubmitButton from 'flamarkt/backoffice/backoffice/components/SubmitButton';\nimport LoadingIndicator from 'flarum/common/components/LoadingIndicator';\nimport Switch from 'flarum/common/components/Switch';\nimport ItemList from 'flarum/common/utils/ItemList';\nimport Tag from '../../common/models/Tag';\n\nexport default class TagShowPage extends AbstractShowPage {\n    tag: Tag | null = null;\n    dirty: boolean = false;\n    saving: boolean = false;\n    name: string = '';\n    visibleCustomer: boolean = false;\n    notifyCustomer: boolean = false;\n\n    newRecord() {\n        return app.store.createRecord('flamarkt-order-tags');\n    }\n\n    findType() {\n        return 'flamarkt/order-tags';\n    }\n\n    show(tag: Tag) {\n        this.tag = tag;\n        this.name = tag.name() || '';\n        this.visibleCustomer = !!tag.visibleCustomer();\n        this.notifyCustomer = !!tag.notifyCustomer();\n\n        app.setTitle(tag.name());\n        app.setTitleCount(0);\n    }\n\n    view() {\n        if (!this.tag) {\n            return LoadingIndicator.component();\n        }\n\n        return m('form.OrderTagShowPage', {\n            onsubmit: this.onsubmit.bind(this),\n        }, m('.container', this.fields().toArray()));\n    }\n\n    fields(): ItemList<Children> {\n        const fields = new ItemList<Children>();\n\n        fields.add('name', m('.Form-group', [\n            m('label', 'Name'),\n            m('input.FormControl', {\n                type: 'text',\n                value: this.name,\n                oninput: (event: Event) => {\n                    this.name = (event.target as HTMLInputElement).value;\n                    this.dirty = true;\n                },\n            }),\n        ]));\n\n        fields.add('visibleCustomer', m('.Form-group', [\n            Switch.component({\n                state: this.visibleCustomer,\n                onchange: (state: boolean) => {\n                    this.visibleCustomer = state;\n                    this.dirty = true;\n                },\n            }, 'Visible to customer'),\n        ]));\n\n        fields.add('notifyCustomer', m('.Form-group', [\n            Switch.component({\n                state: this.notifyCustomer,\n                onchange: (state: boolean) => {\n                    this.notifyCustomer = state;\n                    this.dirty = true;\n                },\n            }, 'Notify customer when added'),\n        ]));\n\n        fields.add('submit', m('.Form-group', [\n            SubmitButton.component({\n                loading: this.saving,\n                dirty: this.dirty,\n                exists: this.tag!.exists,\n            }),\n        ]), -10);\n\n        return fields;\n    }\n\n    data() {\n        return {\n            name: this.name,\n            visibleCustomer: this.visibleCustomer,\n            notifyCustomer: this.notifyCustomer,\n        };\n    }\n\n    onsubmit(event: Event) {\n        event.preventDefault();\n\n        this.saving = true;\n\n        this.tag!.save(this.data()).then(tag => {\n            this.tag = tag;\n\n            this.saving = false;\n            this.dirty = false;\n            m.redraw();\n\n            m.route.set(app.route('orderTags.show', {\n                id: tag.id(),\n            }));\n        }).catch(error => {\n            this.saving = false;\n            m.redraw();\n        });\n    }\n}\n","import TagList from './components/TagList';\nimport TagIndexPage from './pages/TagIndexPage';\nimport TagShowPage from './pages/TagShowPage';\nimport TagListState from './states/TagListState';\n\nexport const backoffice = {\n    'components/TagList': TagList,\n    'pages/TagIndexPage': TagIndexPage,\n    'pages/TagShowPage': TagShowPage,\n    'states/TagListState': TagListState,\n}\n","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['common/Component'];","import Component from 'flarum/common/Component';\nimport Tag from '../models/Tag';\n\nexport interface TagLabelAttrs {\n    // Don't call it \"tag\" to prevent any Mithril conflict\n    orderTag: Tag\n}\n\nexport default class TagLabel extends Component<TagLabelAttrs> {\n    view() {\n        return this.attrs.orderTag.name();\n    }\n}\n","import Component from 'flarum/common/Component';\nimport Tag from '../models/Tag';\nimport TagLabel from './TagLabel';\n\nexport interface TagLabelsAttrs {\n    orderTags?: Tag[]\n}\n\nexport default class TagLabels extends Component<TagLabelsAttrs> {\n    view() {\n        return (this.attrs.orderTags || []).map(orderTag => orderTag ? m(TagLabel, {\n            orderTag,\n        }) : null);\n    }\n}\n","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['common/Model'];","import Model from 'flarum/common/Model';\n\nexport default class Tag extends Model {\n    slug = Model.attribute<string>('slug');\n    name = Model.attribute<string>('name');\n    visibleCustomer = Model.attribute<boolean | null>('visibleCustomer');\n    notifyCustomer = Model.attribute<boolean | null>('notifyCustomer');\n\n    apiEndpoint() {\n        return '/flamarkt/order-tags' + (this.exists ? '/' + (this.data as any).id : '');\n    }\n}\n","import TagLabel from './components/TagLabel';\nimport TagLabels from './components/TagLabels';\nimport Tag from './models/Tag';\n\nexport const common = {\n    'components/TagLabel': TagLabel,\n    'components/TagLabels': TagLabels,\n    'models/Tag': Tag,\n}\n","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['common/app'];","const __WEBPACK_NAMESPACE_OBJECT__ = ((flarum.extensions['flamarkt-core']||{})['common']||{})['models/Order'];","const __WEBPACK_NAMESPACE_OBJECT__ = ((flarum.extensions['flamarkt-core']||{})['backoffice']||{})['components/OrderList'];","const __WEBPACK_NAMESPACE_OBJECT__ = ((flarum.extensions['flamarkt-core']||{})['backoffice']||{})['pages/OrderShowPage'];","const __WEBPACK_NAMESPACE_OBJECT__ = ((flarum.extensions['flamarkt-backoffice']||{})['common']||{})['components/AbstractRelationshipSelect'];","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['common/helpers/highlight'];","import app from 'flamarkt/backoffice/backoffice/app';\nimport AbstractRelationshipSelect from 'flamarkt/backoffice/common/components/AbstractRelationshipSelect';\nimport highlight from 'flarum/common/helpers/highlight';\nimport Tag from '../../common/models/Tag';\n\nexport default class TagRelationshipSelect extends AbstractRelationshipSelect<Tag> {\n    protected resultsCache = new Map<string, Tag[]>();\n\n    search(query: string) {\n        if (!query) {\n            m.redraw();\n            return Promise.resolve();\n        }\n\n        return app.store\n            .find<Tag[]>('flamarkt/order-tags', {\n                filter: {q: query},\n                page: {limit: 5},\n            })\n            .then((results) => {\n                this.resultsCache.set(query, results);\n                m.redraw();\n            });\n    }\n\n    results(query: string) {\n        if (!query) {\n            return [];\n        }\n\n        query = query.toLowerCase();\n\n        const results = this.resultsCache.get(query);\n\n        // Indicates still loading\n        if (typeof results === 'undefined') {\n            return null;\n        }\n\n        return (results || [])\n            .concat(\n                app.store\n                    .all<Tag>('flamarkt-order-tags')\n                    .filter(tag => tag.name().toLowerCase().substr(0, query.length) === query)\n            )\n            .filter((e, i, arr) => arr.lastIndexOf(e) === i)\n            .sort((a, b) => a.name().localeCompare(b.name()));\n    }\n\n    item(tag: Tag, query?: string) {\n        return [\n            query ? highlight(tag.name(), query) : tag.name(),\n        ];\n    }\n}\n","import app from 'flamarkt/backoffice/backoffice/app';\nimport {extend} from 'flarum/common/extend';\nimport ActiveLinkButton from 'flamarkt/backoffice/common/components/ActiveLinkButton';\nimport BackofficeNav from 'flamarkt/backoffice/backoffice/components/BackofficeNav';\nimport TagIndexPage from './pages/TagIndexPage';\nimport TagShowPage from './pages/TagShowPage';\nimport {backoffice} from './compat';\nimport {common} from '../common/compat';\nimport addModels from '../common/addModels';\nimport extendOrderIndex from './extendOrderIndex';\nimport extendOrderShow from './extendOrderShow';\n\nexport {\n    backoffice,\n    common,\n};\n\napp.initializers.add('flamarkt-order-tags', () => {\n    addModels();\n    extendOrderIndex();\n    extendOrderShow();\n\n    app.routes['orderTags.index'] = {\n        path: '/order-tags',\n        component: TagIndexPage,\n    };\n    app.routes['orderTags.show'] = {\n        path: '/order-tags/:id',\n        component: TagShowPage,\n    };\n\n    extend(BackofficeNav.prototype, 'items', function (items) {\n        items.add('order-tags', ActiveLinkButton.component({\n            href: app.route('orderTags.index'),\n            icon: 'fas fa-tag',\n            activeRoutes: [\n                'orderTags.*',\n            ],\n        }, 'Order Tags'));\n    });\n});\n","import app from 'flarum/common/app';\nimport Model from 'flarum/common/Model';\nimport Order from 'flamarkt/core/common/models/Order';\nimport Tag from './models/Tag';\n\nexport default function () {\n    app.store.models['flamarkt-order-tags'] = Tag;\n\n    Order.prototype.tags = Model.hasMany<Tag>('tags');\n}\n","import {extend} from 'flarum/common/extend';\nimport OrderList from 'flamarkt/core/backoffice/components/OrderList';\nimport TagLabels from '../common/components/TagLabels';\n\nexport default function () {\n    extend(OrderList.prototype, 'head', function (columns) {\n        columns.add('tags', m('th', 'Tags'), 60);\n    });\n\n    extend(OrderList.prototype, 'columns', function (columns, order) {\n        columns.add('tags', m('td', TagLabels.component({\n            orderTags: order.tags(),\n        })), 60);\n    });\n}\n","import {extend} from 'flarum/common/extend';\nimport OrderShowPage from 'flamarkt/core/backoffice/pages/OrderShowPage';\nimport Tag from '../common/models/Tag';\nimport TagRelationshipSelect from './components/TagRelationshipSelect';\n\nexport default function () {\n\n    extend(OrderShowPage.prototype, 'show', function () {\n        const tags = this.order!.tags();\n\n        this.tags = Array.isArray(tags) ? tags.filter(tag => typeof tag !== 'undefined') as Tag[] : [];\n    });\n\n    extend(OrderShowPage.prototype, 'fields', function (fields) {\n        fields.add('tags', m('.Form-group', [\n            m('label', 'Tags'),\n            TagRelationshipSelect.component({\n                relationship: this.tags,\n                onchange: (tags: Tag[]) => {\n                    this.tags = tags;\n                    this.dirty = true;\n                },\n            }),\n        ]));\n    });\n\n    extend(OrderShowPage.prototype, 'data', function (data: any) {\n        data.relationships = data.relationships || {};\n\n        data.relationships.tags = this.tags;\n    });\n}\n"],"names":["__webpack_require__","module","getter","__esModule","d","a","exports","definition","key","o","Object","defineProperty","enumerable","get","obj","prop","prototype","hasOwnProperty","call","Symbol","toStringTag","value","flarum","extensions","core","compat","_setPrototypeOf","p","setPrototypeOf","bind","__proto__","_inheritsLoose","subClass","superClass","create","constructor","TagListState","type","AbstractListState","TagList","head","columns","add","m","tag","name","actions","LinkButton","className","icon","href","app","id","AbstractList","TagIndexPage","listState","oninit","vnode","this","refresh","view","state","Page","TagShowPage","dirty","saving","visibleCustomer","notifyCustomer","newRecord","findType","show","onsubmit","fields","toArray","LoadingIndicator","ItemList","oninput","event","target","Switch","onchange","SubmitButton","loading","exists","data","preventDefault","save","then","redraw","route","set","error","AbstractShowPage","backoffice","TagLabel","attrs","orderTag","Component","TagLabels","orderTags","map","Tag","slug","Model","apiEndpoint","common","TagRelationshipSelect","resultsCache","Map","search","query","filter","q","page","limit","results","Promise","resolve","toLowerCase","concat","substr","length","e","i","arr","lastIndexOf","sort","b","localeCompare","item","highlight","AbstractRelationshipSelect","Order","extend","OrderList","order","component","tags","OrderShowPage","Array","isArray","relationship","relationships","path","BackofficeNav","items","ActiveLinkButton","activeRoutes"],"sourceRoot":""}